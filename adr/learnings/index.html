<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="OSDU SPI Management Template - Simplified enterprise-grade fork management with AI-enhanced workflows"><meta name=author content="Daniel Scholl"><link href=https://azure.github.io/osdu-spi/adr/learnings/ rel=canonical><link href=../ rel=prev><link rel=icon href=../../images/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Learnings - OSDU Azure SPI</title><link rel=stylesheet href=../../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Fira Code"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#learnings-insights class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="OSDU Azure SPI" class="md-header__button md-logo" aria-label="OSDU Azure SPI" data-md-component=logo> <img src=../../images/favicon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OSDU Azure SPI </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Learnings </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/azure/osdu-spi title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> osdu-spi </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../concepts/ class=md-tabs__link> Concepts </a> </li> <li class=md-tabs__item> <a href=../../architecture/overview/ class=md-tabs__link> Architecture </a> </li> <li class=md-tabs__item> <a href=../../workflows/initialization/ class=md-tabs__link> Workflows </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Decisions </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="OSDU Azure SPI" class="md-nav__button md-logo" aria-label="OSDU Azure SPI" data-md-component=logo> <img src=../../images/favicon.png alt=logo> </a> OSDU Azure SPI </label> <div class=md-nav__source> <a href=https://github.com/azure/osdu-spi title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> osdu-spi </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/ class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/three_branch_strategy/ class=md-nav__link> <span class=md-ellipsis> Three-Branch Strategy </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/workflow_system/ class=md-nav__link> <span class=md-ellipsis> Workflow System </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/ai_integration/ class=md-nav__link> <span class=md-ellipsis> AI Integration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Workflows </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Workflows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../workflows/initialization/ class=md-nav__link> <span class=md-ellipsis> Initialization </span> </a> </li> <li class=md-nav__item> <a href=../../workflows/synchronization/ class=md-nav__link> <span class=md-ellipsis> Synchronization </span> </a> </li> <li class=md-nav__item> <a href=../../workflows/cascade/ class=md-nav__link> <span class=md-ellipsis> Cascade </span> </a> </li> <li class=md-nav__item> <a href=../../workflows/validation/ class=md-nav__link> <span class=md-ellipsis> Validation </span> </a> </li> <li class=md-nav__item> <a href=../../workflows/build/ class=md-nav__link> <span class=md-ellipsis> Build </span> </a> </li> <li class=md-nav__item> <a href=../../workflows/release/ class=md-nav__link> <span class=md-ellipsis> Release </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Decisions </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Decisions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Index </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Learnings </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Learnings </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#the-power-of-isolation class=md-nav__link> <span class=md-ellipsis> The Power of Isolation </span> </a> </li> <li class=md-nav__item> <a href=#managing-engineering-systems-across-many-repositories class=md-nav__link> <span class=md-ellipsis> Managing Engineering Systems Across Many Repositories </span> </a> </li> <li class=md-nav__item> <a href=#separation-of-concerns-wins class=md-nav__link> <span class=md-ellipsis> Separation of Concerns Wins </span> </a> </li> <li class=md-nav__item> <a href=#safety-net-pattern-the-sweeper class=md-nav__link> <span class=md-ellipsis> Safety Net Pattern: The Sweeper </span> </a> </li> <li class=md-nav__item> <a href=#the-missing-yaml-problem class=md-nav__link> <span class=md-ellipsis> The "Missing YAML" Problem </span> </a> </li> <li class=md-nav__item> <a href=#ai-as-enhancement-not-dependency class=md-nav__link> <span class=md-ellipsis> AI as Enhancement, Not Dependency </span> </a> </li> <li class=md-nav__item> <a href=#human-centric-automation-philosophy class=md-nav__link> <span class=md-ellipsis> Human-Centric Automation Philosophy </span> </a> </li> <li class=md-nav__item> <a href=#conflict-category-analysis class=md-nav__link> <span class=md-ellipsis> Conflict Category Analysis </span> </a> </li> <li class=md-nav__item> <a href=#detection-vs-resolution class=md-nav__link> <span class=md-ellipsis> Detection vs Resolution </span> </a> </li> <li class=md-nav__item> <a href=#backward-compatibility-is-non-negotiable class=md-nav__link> <span class=md-ellipsis> Backward Compatibility is Non-Negotiable </span> </a> </li> <li class=md-nav__item> <a href=#template-pollution-problem class=md-nav__link> <span class=md-ellipsis> Template Pollution Problem </span> </a> </li> <li class=md-nav__item> <a href=#bootstrap-problem-local-actions-solution class=md-nav__link> <span class=md-ellipsis> Bootstrap Problem: Local Actions Solution </span> </a> </li> <li class=md-nav__item> <a href=#labels-as-workflow-state-machines class=md-nav__link> <span class=md-ellipsis> Labels as Workflow State Machines </span> </a> </li> <li class=md-nav__item> <a href=#issue-lifecycle-tracking class=md-nav__link> <span class=md-ellipsis> Issue Lifecycle Tracking </span> </a> </li> <li class=md-nav__item> <a href=#duplicate-prevention-architecture class=md-nav__link> <span class=md-ellipsis> Duplicate Prevention Architecture </span> </a> </li> <li class=md-nav__item> <a href=#meta-commit-strategy-for-versioning class=md-nav__link> <span class=md-ellipsis> Meta Commit Strategy for Versioning </span> </a> </li> <li class=md-nav__item> <a href=#dependabot-integration-complexity class=md-nav__link> <span class=md-ellipsis> Dependabot Integration Complexity </span> </a> </li> <li class=md-nav__item> <a href=#monitor-everything-from-day-one class=md-nav__link> <span class=md-ellipsis> Monitor Everything From Day One </span> </a> </li> <li class=md-nav__item> <a href=#documentation-as-code-review class=md-nav__link> <span class=md-ellipsis> Documentation as Code Review </span> </a> </li> <li class=md-nav__item> <a href=#the-human-required-label-strategy class=md-nav__link> <span class=md-ellipsis> The Human-Required Label Strategy </span> </a> </li> <li class=md-nav__item> <a href=#future-directions class=md-nav__link> <span class=md-ellipsis> Future Directions </span> </a> </li> <li class=md-nav__item> <a href=#start-simple-evolve-systematically class=md-nav__link> <span class=md-ellipsis> Start Simple, Evolve Systematically </span> </a> </li> <li class=md-nav__item> <a href=#real-world-testing-beats-assumptions class=md-nav__link> <span class=md-ellipsis> Real-World Testing Beats Assumptions </span> </a> </li> <li class=md-nav__item> <a href=#clear-error-messages-are-feature-requirements class=md-nav__link> <span class=md-ellipsis> Clear Error Messages Are Feature Requirements </span> </a> </li> <li class=md-nav__item> <a href=#bash-script-extraction-enables-testing class=md-nav__link> <span class=md-ellipsis> Bash Script Extraction Enables Testing </span> </a> </li> <li class=md-nav__item> <a href=#configuration-flexibility-compounds-value class=md-nav__link> <span class=md-ellipsis> Configuration Flexibility Compounds Value </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#the-power-of-isolation class=md-nav__link> <span class=md-ellipsis> The Power of Isolation </span> </a> </li> <li class=md-nav__item> <a href=#managing-engineering-systems-across-many-repositories class=md-nav__link> <span class=md-ellipsis> Managing Engineering Systems Across Many Repositories </span> </a> </li> <li class=md-nav__item> <a href=#separation-of-concerns-wins class=md-nav__link> <span class=md-ellipsis> Separation of Concerns Wins </span> </a> </li> <li class=md-nav__item> <a href=#safety-net-pattern-the-sweeper class=md-nav__link> <span class=md-ellipsis> Safety Net Pattern: The Sweeper </span> </a> </li> <li class=md-nav__item> <a href=#the-missing-yaml-problem class=md-nav__link> <span class=md-ellipsis> The "Missing YAML" Problem </span> </a> </li> <li class=md-nav__item> <a href=#ai-as-enhancement-not-dependency class=md-nav__link> <span class=md-ellipsis> AI as Enhancement, Not Dependency </span> </a> </li> <li class=md-nav__item> <a href=#human-centric-automation-philosophy class=md-nav__link> <span class=md-ellipsis> Human-Centric Automation Philosophy </span> </a> </li> <li class=md-nav__item> <a href=#conflict-category-analysis class=md-nav__link> <span class=md-ellipsis> Conflict Category Analysis </span> </a> </li> <li class=md-nav__item> <a href=#detection-vs-resolution class=md-nav__link> <span class=md-ellipsis> Detection vs Resolution </span> </a> </li> <li class=md-nav__item> <a href=#backward-compatibility-is-non-negotiable class=md-nav__link> <span class=md-ellipsis> Backward Compatibility is Non-Negotiable </span> </a> </li> <li class=md-nav__item> <a href=#template-pollution-problem class=md-nav__link> <span class=md-ellipsis> Template Pollution Problem </span> </a> </li> <li class=md-nav__item> <a href=#bootstrap-problem-local-actions-solution class=md-nav__link> <span class=md-ellipsis> Bootstrap Problem: Local Actions Solution </span> </a> </li> <li class=md-nav__item> <a href=#labels-as-workflow-state-machines class=md-nav__link> <span class=md-ellipsis> Labels as Workflow State Machines </span> </a> </li> <li class=md-nav__item> <a href=#issue-lifecycle-tracking class=md-nav__link> <span class=md-ellipsis> Issue Lifecycle Tracking </span> </a> </li> <li class=md-nav__item> <a href=#duplicate-prevention-architecture class=md-nav__link> <span class=md-ellipsis> Duplicate Prevention Architecture </span> </a> </li> <li class=md-nav__item> <a href=#meta-commit-strategy-for-versioning class=md-nav__link> <span class=md-ellipsis> Meta Commit Strategy for Versioning </span> </a> </li> <li class=md-nav__item> <a href=#dependabot-integration-complexity class=md-nav__link> <span class=md-ellipsis> Dependabot Integration Complexity </span> </a> </li> <li class=md-nav__item> <a href=#monitor-everything-from-day-one class=md-nav__link> <span class=md-ellipsis> Monitor Everything From Day One </span> </a> </li> <li class=md-nav__item> <a href=#documentation-as-code-review class=md-nav__link> <span class=md-ellipsis> Documentation as Code Review </span> </a> </li> <li class=md-nav__item> <a href=#the-human-required-label-strategy class=md-nav__link> <span class=md-ellipsis> The Human-Required Label Strategy </span> </a> </li> <li class=md-nav__item> <a href=#future-directions class=md-nav__link> <span class=md-ellipsis> Future Directions </span> </a> </li> <li class=md-nav__item> <a href=#start-simple-evolve-systematically class=md-nav__link> <span class=md-ellipsis> Start Simple, Evolve Systematically </span> </a> </li> <li class=md-nav__item> <a href=#real-world-testing-beats-assumptions class=md-nav__link> <span class=md-ellipsis> Real-World Testing Beats Assumptions </span> </a> </li> <li class=md-nav__item> <a href=#clear-error-messages-are-feature-requirements class=md-nav__link> <span class=md-ellipsis> Clear Error Messages Are Feature Requirements </span> </a> </li> <li class=md-nav__item> <a href=#bash-script-extraction-enables-testing class=md-nav__link> <span class=md-ellipsis> Bash Script Extraction Enables Testing </span> </a> </li> <li class=md-nav__item> <a href=#configuration-flexibility-compounds-value class=md-nav__link> <span class=md-ellipsis> Configuration Flexibility Compounds Value </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=learnings-insights>Learnings &amp; Insights</h1> <div class="admonition abstract"> <p class=admonition-title>Living Document</p> <p>These learnings represent accumulated wisdom from building, deploying, and maintaining a complex fork management system. They serve as guideposts for future development and as context for understanding the current architecture.</p> </div> <hr> <h2 id=the-power-of-isolation>The Power of Isolation</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Complex integration problems become manageable when properly isolated. Adding isolation stages doesn't slow teams down, it accelerates them by preventing cascade failures.</p> </div> <p>The system runs upstream sync on a schedule, creating a PR to <code>fork_upstream</code>. You control when to merge—batching multiple changes or merging immediately. Once merged, the cascade automatically moves changes to <code>fork_integration</code> for validation. If builds pass, changes flow to <code>main</code>. If validation fails, the issue is isolated and fixed without blocking the team. Main stays protected and the team keeps shipping.</p> <pre class=mermaid><code>graph LR
    A[Scheduled Sync] --&gt;|Creates PR| B[fork_upstream]
    B --&gt;|You decide when| C{Merge?}
    C --&gt;|Yes| D[fork_integration]
    C --&gt;|Wait| B
    D --&gt;|Validate| E{Build OK?}
    E --&gt;|Pass| F[main]
    E --&gt;|Fail| G[Fix in isolation]
    G --&gt;|Retry| D
    F --&gt;|Team keeps shipping| H[Production]

    style B fill:#e1f5ff
    style D fill:#fff4e1
    style F fill:#e8f5e9
    style G fill:#ffebee</code></pre> <div class="admonition example"> <p class=admonition-title>The Airlock Pattern</p> <p>Think of <code>fork_integration</code> as an isolation airlock. Upstream changes enter the chamber where it is prepared for "decompression" (breaking changes). Breach detected? Fix it, while crews in main chamber continue to work. Only proven-safe changes pass through into main.</p> </div> <table> <thead> <tr> <th>Branch</th> <th>Purpose</th> <th>Can Break?</th> <th>Team Impact</th> </tr> </thead> <tbody> <tr> <td><code>fork_upstream</code></td> <td>Pure mirror</td> <td>No</td> <td>Zero - accumulates until you're ready</td> </tr> <tr> <td><code>fork_integration</code></td> <td>Validation workspace</td> <td>Yes</td> <td>Zero - isolated from production</td> </tr> <tr> <td><code>main</code></td> <td>Protected production</td> <td>Never</td> <td>Zero - only receives validated changes</td> </tr> </tbody> </table> <p><strong>Team Impact</strong>: When integration breaks, engineers fix, feature flag, or add integration necessary while others continue shipping. If main breaks, everyone must stop.</p> <hr> <h2 id=managing-engineering-systems-across-many-repositories>Managing Engineering Systems Across Many Repositories</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Managing engineering systems (workflows, actions, configs) across many repositories requires separating shared logic from instance-specific data. One central repository controls the engineering system; other repositories receive updates via PR.</p> </div> <p><strong>The Challenge</strong>: You have many different repositories. Each needs the same workflows (sync, cascade, build, release) but different upstream sources, labels, and settings. How do you improve workflows without manually updating each repository?</p> <p><strong>The Pattern</strong> (Phone Home):</p> <pre class=mermaid><code>graph LR
    A[Central Management]

    B[Fork: repo-1 ]
    C[Fork: repo-2 ]
    D[Fork: repo-n ]

    B --&gt;|Weekly &lt;br/&gt;check | A
    C --&gt;|Weekly &lt;br/&gt;check | A
    D --&gt;|Weekly &lt;br/&gt;check | A

    style A fill:#e8f5e9
    style B fill:#e1f5ff
    style C fill:#e1f5ff
    style D fill:#e1f5ff</code></pre> <p><strong>Separation Strategy</strong>:</p> <table> <thead> <tr> <th>Type</th> <th>Lives In</th> <th>Controlled By</th> <th>Example</th> </tr> </thead> <tbody> <tr> <td><strong>Logic</strong></td> <td>Template workflows</td> <td>Template owner</td> <td>How to sync, how to cascade, how to build</td> </tr> <tr> <td><strong>Data</strong></td> <td>Fork config files</td> <td>Fork owner</td> <td>Which upstream URL, which files to sync, which labels</td> </tr> </tbody> </table> <p><strong>How It Works</strong>:</p> <ol> <li>You fix a bug in <code>sync.yml</code> → commit to central template</li> <li>Weekly sync creates PRs in all repositories</li> <li><strong>Repository owners control when to merge</strong> → Review changes, merge when ready</li> <li>Logic improves everywhere; data stays repository-specific</li> </ol> <div class="admonition note"> <p class=admonition-title>Key Insight</p> <p>Externalizing repository-specific values (upstream URLs, file patterns, labels) into config files enables engineering system evolution without merge conflicts. Pull-based distribution via PR gives repository owners full control over timing. Cost of indirection &lt; cost of manually synchronizing many repositories.</p> </div> <hr> <h2 id=separation-of-concerns-wins>Separation of Concerns Wins</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Splitting complex operations into focused components improves reliability and maintainability.</p> </div> <p><strong>Decision Framework: When to Split Workflows</strong></p> <p>Ask: <em>"What are the distinct responsibilities?"</em></p> <table> <thead> <tr> <th>Indicator</th> <th>Example</th> <th>Solution</th> </tr> </thead> <tbody> <tr> <td>Multiple failure modes</td> <td>Init workflow handles user input AND system config</td> <td>Split into <code>init.yml</code> + <code>init-complete.yml</code></td> </tr> <tr> <td>Different execution contexts</td> <td>Template development vs fork production</td> <td>Separate directories (<a href=../015-template-workflows-separation-pattern/ >ADR-015</a>)</td> </tr> <tr> <td>Conflicting requirements</td> <td>User interaction vs automation</td> <td>Isolate human touchpoints</td> </tr> </tbody> </table> <p><strong>Pattern</strong>: When a workflow becomes complex, identify distinct responsibilities and split them.</p> <p><strong>Impact</strong>: Both workflows become simpler, more testable, and easier to debug. Template-workflows separation eliminated workflow pollution entirely.</p> <hr> <h2 id=safety-net-pattern-the-sweeper>Safety Net Pattern: The Sweeper</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Human-triggered workflows need automated sweeper processes to catch missed triggers and enable self-healing recovery.</p> </div> <p><strong>The Problem</strong>:</p> <ul> <li>You merge upstream sync PR but forget to trigger cascade → Changes stuck</li> <li>Cascade fails due to temporary issue, you fix it → How does it retry?</li> </ul> <p><strong>The Solution</strong>: <code>cascade-monitor.yml</code> runs every 6 hours as a sweeper:</p> <ol> <li><strong>Checks for pending work</strong>: Compares <code>fork_upstream</code> vs <code>fork_integration</code> branches</li> <li><strong>Detects missed triggers</strong>: Finds merged sync PRs without cascade started</li> <li><strong>Auto-triggers cascade</strong>: Starts integration automatically when found</li> <li><strong>Enables recovery</strong>: When humans remove <code>human-required</code> label after fixes, sweeper detects and retries</li> </ol> <p><strong>Pattern</strong>: For human-triggered critical workflows, add scheduled sweeper that detects incomplete state and auto-triggers recovery.</p> <div class="admonition tip"> <p class=admonition-title>Safety Net, Not Replacement</p> <p>The sweeper is a fallback for human error or recovery scenarios. Primary path is still manual triggering after review. Sweeper ensures nothing gets permanently stuck.</p> </div> <hr> <h2 id=the-missing-yaml-problem>The "Missing YAML" Problem</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Sometimes the simplest solution provides dramatic improvements.</p> </div> <p><strong>The Problem</strong>: Workflows not found when using <code>pull_request</code> events because init workflows don't exist in the PR branch yet.</p> <p><strong>The Solution</strong>: Switch to <code>pull_request_target</code> which reads workflows from the target branch.</p> <table> <thead> <tr> <th>Event Type</th> <th>Workflow Source</th> <th>Use Case</th> </tr> </thead> <tbody> <tr> <td><code>pull_request</code></td> <td>PR branch</td> <td>Standard PR validation</td> </tr> <tr> <td><code>pull_request_target</code></td> <td>Target branch</td> <td>Bootstrap scenarios</td> </tr> </tbody> </table> <p><strong>Takeaway</strong>: When facing GitHub Actions issues, thoroughly understand event contexts and workflow execution environments before building complex workarounds. One line of configuration solved weeks of reliability issues.</p> <hr> <h2 id=ai-as-enhancement-not-dependency>AI as Enhancement, Not Dependency</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>AI capabilities should improve workflows without creating critical dependencies.</p> </div> <p><strong>Implementation Strategy:</strong></p> <ul> <li>Core functionality operates reliably when AI services unavailable</li> <li>AI-enhanced PR descriptions fall back to structured templates</li> <li>Conflict analysis succeeds with or without AI suggestions</li> <li>AIPR with Azure Foundry provides single, reliable AI integration</li> </ul> <p><strong>Pattern</strong>: Build resilient fallbacks first, then layer on AI enhancements.</p> <p><strong>Current Approach</strong>: Using AIPR tool with Azure Foundry exclusively. Detection logic checks for Azure API credentials and gracefully falls back to static descriptions when unavailable. This single-provider approach simplifies configuration while maintaining reliability through comprehensive fallback handling.</p> <p><strong>Impact</strong>: Teams trust and adopt workflows that work consistently, with AI providing value when available rather than creating blocking dependencies.</p> <hr> <h2 id=human-centric-automation-philosophy>Human-Centric Automation Philosophy</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>The most successful automation enhances human capabilities rather than replacing human judgment.</p> </div> <p><strong>Applied Pattern:</strong></p> <ul> <li><strong>Cascade workflow</strong>: Manual triggering after sync PR review gives teams explicit control over timing and batching</li> <li><strong>Conflict analysis</strong>: AI provides guidance and categorization; humans make resolution decisions</li> <li><strong>Release decisions</strong>: Automation suggests version bumps; humans approve before release</li> </ul> <p><strong>Takeaway</strong>: Automation should handle toil and provide analysis; humans should make decisions with clear context and control.</p> <p><strong>Impact</strong>: Teams trust and adopt workflows that respect their expertise rather than treating them as obstacles to overcome.</p> <hr> <h2 id=conflict-category-analysis>Conflict Category Analysis</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Most conflicts fall into predictable, manageable categories with clear resolution strategies.</p> </div> <p><strong>Category Breakdown:</strong></p> <table> <thead> <tr> <th>Category</th> <th>Frequency</th> <th>Risk Level</th> <th>Resolution Strategy</th> </tr> </thead> <tbody> <tr> <td><strong>Structural</strong></td> <td>~40%</td> <td>Low</td> <td>Preserve local structure while adopting upstream organization</td> </tr> <tr> <td><strong>Functional</strong></td> <td>~35%</td> <td>High</td> <td>Preserve local enhancement intent while adopting improvements</td> </tr> <tr> <td><strong>Merge Artifacts</strong></td> <td>~25%</td> <td>Medium</td> <td>Focus on testing behavior, not just compilation</td> </tr> </tbody> </table> <p><strong>Resolution Philosophy</strong>: Always understand the <strong>intent</strong> behind local modifications. Test functionality thoroughly—successful compilation doesn't guarantee correct integration.</p> <p><strong>Practical Impact</strong>: Categorizing conflicts reduces time-to-understanding and provides clear resolution approaches for each type.</p> <hr> <h2 id=detection-vs-resolution>Detection vs Resolution</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Detecting conflicts is valuable even when you can't automatically resolve them.</p> </div> <p><strong>Value Provided:</strong></p> <ul> <li>Structured analysis and categorization</li> <li>Significantly reduced time-to-understanding</li> <li>Guided resolution even when manual work required</li> </ul> <p><strong>Pattern</strong>: Build detection and analysis layers first; automated resolution emerges as patterns become clear over time.</p> <p><strong>Takeaway</strong>: The value lies in guidance and structure, not full automation. AI-enhanced conflict detection provides immediate value even without automated fixes.</p> <hr> <h2 id=backward-compatibility-is-non-negotiable>Backward Compatibility is Non-Negotiable</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Template changes must work seamlessly with existing fork instances. The cost of supporting backward compatibility is far less than the cost of breaking production instances.</p> </div> <p><strong>Requirements:</strong></p> <ul> <li>Migration strategies for breaking changes</li> <li>Clear communication to affected users</li> <li>Often automated migration tooling</li> <li>Testing against multiple real instances before deployment</li> </ul> <p><strong>Pattern</strong>: Every template change requires validation against real fork instances, not just the template repository.</p> <p><strong>Impact</strong>: Production fork instances continue operating smoothly through template evolution without surprise breakage or emergency fixes.</p> <hr> <h2 id=template-pollution-problem>Template Pollution Problem</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Mixing template development and fork production workflows creates confusion and pollutes fork repositories with infrastructure they don't need.</p> </div> <p><strong>The Solution: Directory Separation</strong></p> <ul> <li><code>.github/workflows/</code> - Template infrastructure (this repository only)</li> <li><code>.github/template-workflows/</code> - Fork production workflows (copied during initialization)</li> </ul> <p><strong>Pattern</strong>: Clear separation between "infrastructure for this repository" and "infrastructure we deploy to instances."</p> <p><strong>Takeaway</strong>: What seems obvious in retrospect emerged from painful experience. Separate contexts require separate locations.</p> <hr> <h2 id=bootstrap-problem-local-actions-solution>Bootstrap Problem: Local Actions Solution</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Extract critical logic to local actions that ship with the template instead of building complex workflow self-update mechanisms.</p> </div> <p><strong>The Problem</strong>: New repository workflows execute from the initial template state, potentially missing critical bug fixes (like <code>--allow-unrelated-histories</code>) made after template creation.</p> <p><strong>The Solution</strong>: Extract critical initialization logic to <code>.github/local-actions/</code> which are part of the template repository and copied during initialization. Since these actions exist in the initial commit, fixes are automatically available without workflow self-update complexity.</p> <p><strong>Implementation Example</strong>: <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1># .github/local-actions/merge-with-theirs-resolution/action.sh</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>git<span class=w> </span>merge<span class=w> </span><span class=s2>&quot;</span><span class=nv>$SOURCE_BRANCH</span><span class=s2>&quot;</span><span class=w> </span>--allow-unrelated-histories<span class=w> </span>--no-ff<span class=w> </span>-X<span class=w> </span>theirs
</span></code></pre></div></p> <p><strong>Why Local Actions Win</strong>:</p> <table> <thead> <tr> <th>Benefit</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><strong>Always Available</strong></td> <td>Part of initial commit, no bootstrap needed</td> </tr> <tr> <td><strong>No External Dependencies</strong></td> <td>Self-contained within repository</td> </tr> <tr> <td><strong>Testable</strong></td> <td>Can test independently of workflows</td> </tr> <tr> <td><strong>Cleaner</strong></td> <td>No workflow self-modification complexity</td> </tr> <tr> <td><strong>Maintainable</strong></td> <td>Single source of truth</td> </tr> </tbody> </table> <p><strong>Pattern</strong>: For template infrastructure that needs to evolve, extract critical logic to local actions rather than building self-update mechanisms.</p> <p><strong>Impact</strong>: Initialization uses latest fixes immediately without complex bootstrap patterns. See <a href=../007-initialization-workflow-bootstrap/ >ADR-007</a> and <a href=../028-workflow-script-extraction-pattern/ >ADR-028</a> for detailed rationale.</p> <hr> <h2 id=labels-as-workflow-state-machines>Labels as Workflow State Machines</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>GitHub labels provide reliable, queryable state management for multi-stage workflows. Use labels to track state and control automation flow.</p> </div> <p><strong>How Labels Enable Automation</strong>:</p> <table> <thead> <tr> <th>Label</th> <th>Workflow Behavior</th> <th>Human Signal</th> </tr> </thead> <tbody> <tr> <td><code>cascade-active</code></td> <td>Automation running, do not interfere</td> <td>Work in progress</td> </tr> <tr> <td><code>human-required</code></td> <td>Automation paused, waiting for human action</td> <td>Please investigate and fix</td> </tr> <tr> <td><code>cascade-blocked</code></td> <td>Automation stopped due to conflicts/failures</td> <td>Blocked on issue</td> </tr> <tr> <td><code>validated</code></td> <td>Passed all checks, ready for next stage</td> <td>Safe to proceed</td> </tr> </tbody> </table> <p><strong>State Transitions Example (Cascade)</strong>: <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>upstream-sync → cascade-active → validated → (closed when merged to main)
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>                     ↓
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>                cascade-blocked → human-required → (human fixes) → cascade-active (retry)
</span></code></pre></div></p> <p><strong>Why Labels Work</strong>:</p> <ul> <li><strong>Queryable</strong>: <code>gh issue list --label "human-required"</code> finds all paused work</li> <li><strong>Reliable</strong>: Never fail due to API issues or permission problems</li> <li><strong>Machine-Readable</strong>: Workflows make decisions based on label presence</li> <li><strong>Human-Readable</strong>: Team sees state at a glance</li> </ul> <p><strong>Pattern</strong>: Use labels to represent workflow state. When automation needs to pause for human intervention, add <code>human-required</code>. When humans signal "ready to retry," remove it and let the sweeper detect and continue.</p> <p><strong>Impact</strong>: Workflows can pause, wait for humans, and automatically resume without complex state management infrastructure.</p> <hr> <h2 id=issue-lifecycle-tracking>Issue Lifecycle Tracking</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Issues make excellent state machines for multi-stage workflows spanning hours or days.</p> </div> <p><strong>Capabilities Provided:</strong></p> <ul> <li><strong>Audit Trail</strong>: Full history for debugging and compliance</li> <li><strong>Progress Updates</strong>: Clear updates stakeholders can understand</li> <li><strong>Queryable State</strong>: Automation can track and react to changes</li> <li><strong>Handoff Points</strong>: Explicit transitions between workflow stages</li> </ul> <p><strong>Pattern</strong>: For complex workflows with multiple stages, use issues as state containers rather than workflow-local variables that disappear between runs.</p> <p><strong>Practical Impact</strong>: Complete visibility into cascade progression with automated state tracking and human-readable progress updates.</p> <hr> <h2 id=duplicate-prevention-architecture>Duplicate Prevention Architecture</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>State persistence between workflow runs prevents duplicate work and notification fatigue.</p> </div> <p><strong>Storage Mechanism</strong>: Git config provides lightweight, reliable storage for workflow state.</p> <p><strong>Capabilities Enabled:</strong></p> <ul> <li>Skip creating duplicate PRs for unchanged upstream</li> <li>Update existing branches when upstream advances</li> <li>Clean up abandoned sync branches automatically</li> </ul> <p><strong>Pattern</strong>: Workflows often need persistent state between runs; git config provides the perfect storage mechanism without external dependencies.</p> <p><strong>Impact</strong>: Smart decision-making eliminates duplicate PRs and unnecessary noise while keeping sync branches current.</p> <hr> <h2 id=meta-commit-strategy-for-versioning>Meta Commit Strategy for Versioning</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>You can have both complete upstream history AND automated version management—they're not mutually exclusive.</p> </div> <p><strong>The Approach</strong>: Layer automation-friendly metadata on top of preserved original data rather than transforming or losing the original.</p> <p><strong>Benefits Comparison:</strong></p> <table> <thead> <tr> <th>Aspect</th> <th>Traditional</th> <th>Meta Commit Approach</th> </tr> </thead> <tbody> <tr> <td><strong>History</strong></td> <td>Squashed/modified</td> <td>Complete preservation</td> </tr> <tr> <td><strong>Debugging</strong></td> <td>Partial context</td> <td>Full upstream history</td> </tr> <tr> <td><strong>Versioning</strong></td> <td>Manual tracking</td> <td>Automated Release Please</td> </tr> <tr> <td><strong>Fallback</strong></td> <td>None</td> <td>Conservative auto-versioning</td> </tr> </tbody> </table> <p><strong>Pattern</strong>: Don't transform or lose original data—add metadata layers instead.</p> <p><strong>Practical Impact</strong>: Full debugging capability with complete upstream history while enabling automated version management and proper release correlation.</p> <hr> <h2 id=dependabot-integration-complexity>Dependabot Integration Complexity</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Automated dependency updates need workflow validation and auto-merge criteria—aggressive automation without guardrails creates problems.</p> </div> <p><strong>Strategy:</strong></p> <table> <thead> <tr> <th>Update Type</th> <th>SLA</th> <th>Auto-Merge Criteria</th> </tr> </thead> <tbody> <tr> <td>Security patches</td> <td>48 hours</td> <td>Tests pass + limited scope</td> </tr> <tr> <td>Feature updates</td> <td>Standard review</td> <td>Manual review required</td> </tr> <tr> <td>Grouped updates</td> <td>Reduced noise</td> <td>Related dependencies only</td> </tr> </tbody> </table> <p><strong>Pattern</strong>: Define clear auto-merge criteria (security patches, passing tests, limited scope) before enabling aggressive automation.</p> <p><strong>Impact</strong>: Security updates get fast-tracked with 48-hour SLA while feature updates follow careful review, balancing speed with safety.</p> <hr> <h2 id=monitor-everything-from-day-one>Monitor Everything From Day One</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Comprehensive monitoring enables rapid issue identification and resolution—but it must be built in from the beginning, not bolted on later.</p> </div> <p><strong>Built In From Start:</strong></p> <ul> <li>Health checks and status reporting</li> <li>SLA tracking with automated alerts</li> <li>Automated escalation workflows</li> <li>Complete audit trails</li> </ul> <p><strong>Pattern</strong>: Build observability into workflows as core functionality, not afterthought instrumentation.</p> <p><strong>Impact</strong>: This design choice paid dividends in operational reliability. Issues are identified and resolved quickly because monitoring was designed in, not retrofitted.</p> <hr> <h2 id=documentation-as-code-review>Documentation as Code Review</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Writing comprehensive documentation often reveals design flaws before implementation begins.</p> </div> <p><strong>The Process:</strong></p> <ol> <li>Articulate rationale and context</li> <li>Explore alternative approaches</li> <li>Document consequences and tradeoffs</li> <li>Discover better designs during writing</li> </ol> <p><strong>Pattern</strong>: Write the ADR before implementing major decisions; treat documentation as a design tool, not just historical recording.</p> <p><strong>Practical Impact</strong>: Better designs discovered during documentation phase rather than expensive refactoring during or after implementation.</p> <hr> <h2 id=the-human-required-label-strategy>The Human-Required Label Strategy</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Username resolution is fragile; label-based workflow management is robust and reliable.</p> </div> <p><strong>The Problem</strong>: Organization names can't be assigned to issues. User accounts change. API failures block workflows.</p> <p><strong>The Solution</strong>: Labels have none of these problems and provide better filtering capabilities.</p> <p><strong>Pattern</strong>: Design for reliability over convenience—labels may seem less direct than assignees, but they work consistently across all scenarios.</p> <p><strong>Impact</strong>: Workflows operate reliably without fragile user resolution dependencies or API failure blocking.</p> <hr> <h2 id=future-directions>Future Directions</h2> <p>Based on accumulated learnings, these areas show promise for continued evolution:</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:3><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Pattern Recognition</label><label for=__tabbed_1_2>Cross-Repository Intelligence</label><label for=__tabbed_1_3>Deeper AI Integration</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><strong>Machine Learning Opportunities</strong></p> <p>Learning from resolved conflicts could enable:</p> <ul> <li>Automated resolution suggestions for common patterns</li> <li>Confidence scoring for resolution approaches</li> <li>Learning from team-specific resolution preferences</li> </ul> <p><strong>Impact</strong>: Progressively better automated assistance as the system learns from real conflict resolutions.</p> </div> <div class=tabbed-block> <p><strong>Multi-Fork Coordination</strong></p> <p>Managing multiple related fork instances could leverage:</p> <ul> <li>Dependency analysis across forks</li> <li>Coordinated update orchestration</li> <li>Template ecosystem versioning</li> </ul> <p><strong>Impact</strong>: Intelligent coordination across the entire OSDU service portfolio rather than isolated per-repository management.</p> </div> <div class=tabbed-block> <p><strong>Enhanced AI Capabilities</strong></p> <p>Building on successful AI enhancement patterns:</p> <ul> <li>Proactive analysis of upstream changes before sync</li> <li>Integration testing suggestions for conflicts</li> <li>Advanced context awareness for complex scenarios</li> </ul> <p><strong>Impact</strong>: AI provides even more valuable guidance while maintaining human control and reliable fallbacks.</p> </div> </div> </div> <hr> <h2 id=start-simple-evolve-systematically>Start Simple, Evolve Systematically</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>The most successful features began with minimal viable implementations and evolved based on real usage feedback.</p> </div> <p><strong>Anti-Pattern</strong>: Over-engineering early wastes effort on wrong assumptions.</p> <p><strong>Impact</strong>: Focus effort on solving real problems discovered through usage rather than theoretical problems that may never materialize.</p> <hr> <h2 id=real-world-testing-beats-assumptions>Real-World Testing Beats Assumptions</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Template changes tested only against the template repository often failed when deployed to real fork instances.</p> </div> <p><strong>Pattern</strong>: Real-world scenarios reveal edge cases that perfect plans miss.</p> <p><strong>Takeaway</strong>: Budget time for testing against multiple real fork instances before declaring template changes complete.</p> <hr> <h2 id=clear-error-messages-are-feature-requirements>Clear Error Messages Are Feature Requirements</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Actionable error messages with recovery instructions aren't nice-to-have polish—they're essential for reliable automation.</p> </div> <p><strong>Impact</strong>: Users can resolve issues themselves with clear guidance rather than requiring expert intervention for every problem.</p> <p><strong>Pattern</strong>: Budget time for clear error messages as core functionality, not optional polish added if time permits.</p> <hr> <h2 id=bash-script-extraction-enables-testing>Bash Script Extraction Enables Testing</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Extracting embedded bash scripts into separate .sh files with action.yml wrappers dramatically improves maintainability and testability.</p> </div> <p><strong>The Problem</strong>: Embedded bash scripts in workflows (~3,500 lines across 9 files) couldn't be tested locally, led to code duplication, and made debugging difficult.</p> <p><strong>The Solution</strong>: Extract scripts to <code>.github/actions/*/script.sh</code> with composite action wrappers (<code>action.yml</code>).</p> <p><strong>Benefits Achieved</strong>:</p> <table> <thead> <tr> <th>Benefit</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><strong>Local Testing</strong></td> <td>Run <code>./script.sh</code> locally without triggering workflows</td> </tr> <tr> <td><strong>Code Reuse</strong></td> <td>Eliminate duplication (e.g., LLM detection duplicated 2x, now shared)</td> </tr> <tr> <td><strong>Better Diffs</strong></td> <td>Script changes separate from workflow structure changes in git</td> </tr> <tr> <td><strong>Debuggability</strong></td> <td>Debug bash logic with standard tools (shellcheck, bash -x)</td> </tr> <tr> <td><strong>40% Size Reduction</strong></td> <td>Workflows became dramatically shorter and clearer</td> </tr> </tbody> </table> <p><strong>Implementation Pattern</strong>: <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>.github/actions/llm-provider-detect/
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>├── action.yml          # Composite action wrapper
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>├── detect-provider.sh  # Testable bash script
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>└── README.md           # Usage and testing docs
</span></code></pre></div></p> <p><strong>Usage in Workflows</strong>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">./.github/actions/llm-provider-detect</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">llm</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>  </span><span class=nt>env</span><span class=p>:</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=nt>AZURE_API_KEY</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.AZURE_API_KEY }}</span>
</span></code></pre></div></p> <p><strong>Pattern</strong>: When bash scripts exceed ~20 lines or need reuse, extract to separate files with action wrappers. See <a href=../028-workflow-script-extraction-pattern/ >ADR-028</a> for comprehensive rationale.</p> <p><strong>Impact</strong>: Complex logic can be tested, debugged, and maintained like regular code rather than embedded workflow snippets.</p> <hr> <h2 id=configuration-flexibility-compounds-value>Configuration Flexibility Compounds Value</h2> <div class="admonition quote"> <p class=admonition-title><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg></span> Learning</p> <p>Every configuration option added multiplies the template's applicability across different scenarios and use cases.</p> </div> <p><strong>ROI</strong>: The extra design effort pays back many times over through broader adoption and fewer special-case implementations.</p> <p><strong>Pattern</strong>: Ask "could someone need this to work differently?" when making design decisions. If yes, make it configurable.</p> <p><strong>Impact</strong>: Template serves diverse scenarios without forking or modification, dramatically increasing reusability.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../ class="md-footer__link md-footer__link--prev" aria-label="Previous: Index"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Index </div> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; Microsoft Corporation. </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.copy", "navigation.collapsible", "navigation.instant", "navigation.instant.preview", "navigation.tabs", "navigation.footer", "navigation.expand", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=../../javascripts/tablesort.js></script> </body> </html>